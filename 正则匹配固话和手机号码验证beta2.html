<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
</head>
<body>
<pre>
需求分析：

功能：检测固话和手机的号码

特征：（1）连续数字不能算  例如链接中的连续数字

（2）固话和手机的号码 其中必须要有前空白字符才算是有效的号码
</pre>
<br>
<textarea name="" id="mystr" cols="60" rows="20"><p>
    &nbsp;&nbsp;&nbsp; 2015年即将过去，那么在过去的一年里哪些是业主网友最关心的？小编根据后台数据统计出了业主最长搜索的十大关键词，以及业主们看你的对多的一些文章，希望给其他准备装修的业主一些启发！下面请看2015家居资讯琅琊榜！
</p>
<p>
    &nbsp;&nbsp; <strong>十大关键词：老房翻新</strong>
</p>
<p>
    &nbsp;&nbsp;&nbsp; 相对于新房装修来说，二手房装修、旧房装修、老房装修更是一个系统工程，无论在设计和施工上等等环节都有不小的差别。
</p>
</textarea>
<div id="msg" style="color:red;"></div>

<script>
var msg = document.getElementById('msg');

document.getElementById('mystr').oninput = function(){

  var myStr=document.getElementById('mystr').value;

  var sTxt = myStr.replace(/<[^>]*>/g,''),
      rel=/((\+86)?1[34578]\d{9})|((\d{3,4}-)?\d{7,8}(-\d{1,4})?)/g,
      aLinks = sTxt.match(/(url\(|src=|href=)[\"\']*([^\"\'\(\)\<\>\[\] ]+)[\"\'\)]*|(http:\/\/[\w\-\.]+[^\"\'\(\)\<\>\[\] ]+)/ig),
      aa = '',
      aLinksLen = 0;

  if(aLinks)
  {
      aa = aLinks.join("\r\n").replace(/^(src=|href=|url\()[\"\']*|[\"\'\>\) ]*$/igm,"");
      aLinks = aa.split(/\s+/g);
      aLinksLen = aLinks.length;

      while (aLinksLen--) {
        sTxt = sTxt.replace(new RegExp(aLinks[aLinksLen],'g'),'');
      }
  }
  msg.innerHTML = '';
  if(rel.test(sTxt)){
     msg.innerHTML = '检测到固话或者手机号';
  }
  else
  {
     msg.innerHTML = '没有检测到固话或者手机号';
  }
}
</script>
</body>
</html>
