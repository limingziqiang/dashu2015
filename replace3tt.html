<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>

<body>
<button type="button">展开</button>
<div id="box" style="font-size:30px; display:none;"> <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> 生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推荐  生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推荐  生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推荐  荐 <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> <img src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png" title="脚本之家" alt="脚本之家"> </div>
------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<div id="box2" style="font-size:30px; "> 生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推荐  生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推荐  生贪玩棒打西瓜伊朗军演试射导弹韩国男团组合失联中国军人海外训练刘德华与粉丝聚会印度高温熔化马路陈建州与儿子比对黄河发现男女浮尸上海万达持刀伤人周杰伦被骂垃圾冯绍峰被曝用替身黄渤回应百花争议日本女偶像遭砍上海中环疑被压断陈志朋献吻苏有朋手机靓号频遭敲诈
	以下信息根据您的兴趣推荐  荐 </div>
<script>

var str = '1321中国2321';
var re = /[\u4E00-\u9FFF]/g;

//alert(str.match(re).length);
//alert(document.getElementById('box').getElementsByTagName('img').length);

</script> 
<script>




var oFormat = {

	
	"insertAfter" : function (newEl, targetEl) { 
		var parentEl = targetEl.parentNode; 
		if(parentEl.lastChild == targetEl) { 
			parentEl.appendChild(newEl); 
		} else { 
			parentEl.insertBefore(newEl,targetEl.nextSibling); 
		} 
	}, 
	"cssCore": function(testCss) {
            switch (true) {
                case testCss.webkitTransition === '':
                return 'webkit'; break;
                case testCss.MozTransition === '':
                return 'Moz'; break;
                case testCss.msTransition === '':
                return 'ms'; break;
                case testCss.OTransition === '':
                return 'O'; break;
                default:
                return '';
            }
     }(document.createElement('dashu').style),
	"imgLen":function(){
		return this.obj.getElementsByTagName('img').length;
	},
	"txtLen":function(){
	
		
		var re = /[\u4E00-\u9FFF]/g,
			sTxt = this.obj.textContent ? this.obj.textContent : this.obj.innerText;
				
		if(sTxt.match(re)!=null){
			return sTxt.match(re).length;
		}
		return 0;
		
	},
	// 只有文字
	"onlyTxt":function(){
		if(this.imgLen() == 0){
			this.obj.style.display = ['-'+this.cssCore.toLowerCase()+'-box'];
			this.obj.style[this.cssCore+'BoxOrient'] = 'vertical';
			this.obj.style[this.cssCore+'LineClamp'] = '4';
			this.obj.style.overflow='hidden';
			this.obj.style.textOverflow = 'ellipsis';
			return "onlyTxt";
		}
		return false;
	},
	// 只有图片
	"onlyImg":function(){
		if(this.txtLen() == 0) {
			
			var i = 0,
				oImg = this.obj.getElementsByTagName('img');
								
			for(i = 0; i < oImg.length; i++)
			{
				if(i > 1){
				
					oImg[i].style.display="none";
				}
			}
			return "onlyImg";
		}
		return false;
	},
	//图文混排
	"TxtAndImg":function(){
		if( (this.txtLen() != 0) && (this.imgLen() != 0)){
		
			this.obj.style.display = ['-'+this.cssCore.toLowerCase()+'-box'];
			this.obj.style[this.cssCore+'BoxOrient'] = 'vertical';
			this.obj.style[this.cssCore+'LineClamp'] = '2';
			this.obj.style.overflow='hidden';
			this.obj.style.textOverflow = 'ellipsis';
			
			var oFirstImg = this.obj.getElementsByTagName('img')[0];
			
			//alert(this.txtLen());
			//alert(this.imgLen());		
		
			
			oFirstImg.className = 'js_tempimg';
			this.oFirstImg = oFirstImg;
			this.insertAfter(oFirstImg, this.obj);
			
			var i = 0,
				oImg = this.obj.getElementsByTagName('img');
								
			for(i = 0; i < oImg.length; i++)
			{	
				oImg[i].style.display="none";
			}
			
			
			return "TxtAndImg";
		}
		return false;
	},
	
	"UpTxtAndImg":function(){
		this.obj.style[this.cssCore+'LineClamp'] = '';
		this.obj.style.overflow='';
		this.obj.style.textOverflow = '';
		//this.oFirstImg.style.display = 'none';
				
		this.oFirstImg.parentNode.removeChild(this.oFirstImg);
		var i = 0,
				oImg = this.obj.getElementsByTagName('img');
								
			for(i = 0; i < oImg.length; i++)
			{	
				oImg[i].style.display="";
			}
	},
	"UpOnlyImg":function(){
		var i = 0,
			oImg = this.obj.getElementsByTagName('img');
							
		for(i = 0; i < oImg.length; i++)
		{
			oImg[i].style.display="";
		}
	},
	"UpOnlyTxt":function(){
		this.obj.style[this.cssCore+'LineClamp'] = '';
		this.obj.style.overflow='';
		this.obj.style.textOverflow = '';
	},
	"init":function(sName){
		//this.oBox(sName);
		this.sType = this.TxtAndImg() || this.onlyTxt() || this.onlyImg();
		
		alert(this.sType);
	},
	"slideUpInit":function(){
		switch(this.sType){
			case 'onlyTxt': 
				this.UpOnlyTxt();
				break;
			case 'onlyImg': 
				this.UpOnlyImg();
				break;
			case 'TxtAndImg': 
				this.UpTxtAndImg();
				break;
		}
	}
};

var oFormatAct = function(sName){

	//dom
	if(Object.prototype.toString.apply(sName) == "[object Function]"){
		this.obj = sName();
	} else {
		this.obj = document.querySelector(sName);
	}
	
	console.log(this.obj.textContent);

};

oFormatAct.prototype = oFormat;


var a = new oFormatAct('#box2');
	
console.log(a.init());

/*var b = new oFormatAct('#box2');
	
console.log(b.init());*/
</script>
</body>
</html>
